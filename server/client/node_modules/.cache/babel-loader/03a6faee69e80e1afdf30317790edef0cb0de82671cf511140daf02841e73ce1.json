{"ast":null,"code":"import React,{useContext,useState,useEffect}from\"react\";import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";const BASE_URL=\"http://localhost:5000/api/v1/\";const GlobalContext=/*#__PURE__*/React.createContext();export const GlobalProvider=_ref=>{let{children}=_ref;const[incomes,setIncomes]=useState([]);const[expenses,setExpenses]=useState([]);const[error,setError]=useState(null);// Setup Axios Interceptor\nuseEffect(()=>{const token=localStorage.getItem('token');if(token){axios.defaults.headers.common['Authorization']=`Bearer ${token}`;}const interceptor=axios.interceptors.request.use(config=>{const token=localStorage.getItem('token');if(token){config.headers.Authorization=`Bearer ${token}`;}return config;},error=>Promise.reject(error));return()=>{axios.interceptors.request.eject(interceptor);};},[]);// 💰 Add Income\nconst addIncome=async income=>{try{await axios.post(`${BASE_URL}add-income`,income);getIncomes();}catch(err){var _err$response,_err$response$data;console.log(err);setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||\"Failed to add income\");}};// 📥 Get Incomes\nconst getIncomes=async()=>{try{const{data}=await axios.get(`${BASE_URL}get-incomes`);setIncomes(data);}catch(err){var _err$response2,_err$response2$data;console.log(err);setError(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.message)||\"Failed to fetch incomes\");}};// 🗑️ Delete Income\nconst deleteIncome=async id=>{try{await axios.delete(`${BASE_URL}delete-income/${id}`);getIncomes();}catch(err){var _err$response3,_err$response3$data;console.log(err);setError(((_err$response3=err.response)===null||_err$response3===void 0?void 0:(_err$response3$data=_err$response3.data)===null||_err$response3$data===void 0?void 0:_err$response3$data.message)||\"Failed to delete income\");}};const totalIncome=()=>{return incomes.reduce((acc,income)=>acc+income.amount,0);};// 💸 Add Expense\nconst addExpense=async expense=>{try{await axios.post(`${BASE_URL}add-expense`,expense);getExpenses();}catch(err){var _err$response4,_err$response4$data;console.log(err);setError(((_err$response4=err.response)===null||_err$response4===void 0?void 0:(_err$response4$data=_err$response4.data)===null||_err$response4$data===void 0?void 0:_err$response4$data.message)||\"Failed to add expense\");}};// 📥 Get Expenses\nconst getExpenses=async()=>{try{const{data}=await axios.get(`${BASE_URL}get-expenses`);setExpenses(data);}catch(err){var _err$response5,_err$response5$data;console.log(err);setError(((_err$response5=err.response)===null||_err$response5===void 0?void 0:(_err$response5$data=_err$response5.data)===null||_err$response5$data===void 0?void 0:_err$response5$data.message)||\"Failed to fetch expenses\");}};// 🗑️ Delete Expense\nconst deleteExpense=async id=>{try{await axios.delete(`${BASE_URL}delete-expense/${id}`);getExpenses();}catch(err){var _err$response6,_err$response6$data;console.log(err);setError(((_err$response6=err.response)===null||_err$response6===void 0?void 0:(_err$response6$data=_err$response6.data)===null||_err$response6$data===void 0?void 0:_err$response6$data.message)||\"Failed to delete expense\");}};const totalExpenses=()=>{return expenses.reduce((acc,expense)=>acc+expense.amount,0);};const totalBalance=()=>{return totalIncome()-totalExpenses();};const transactionHistory=()=>{const history=[...incomes,...expenses];history.sort((a,b)=>new Date(b.createdAt)-new Date(a.createdAt));return history.slice(0,3);};return/*#__PURE__*/_jsx(GlobalContext.Provider,{value:{addIncome,getIncomes,incomes,deleteIncome,addExpense,getExpenses,expenses,deleteExpense,totalIncome,totalExpenses,totalBalance,transactionHistory,error,setError},children:children});};export const useGlobalContext=()=>{return useContext(GlobalContext);};","map":{"version":3,"names":["React","useContext","useState","useEffect","axios","jsx","_jsx","BASE_URL","GlobalContext","createContext","GlobalProvider","_ref","children","incomes","setIncomes","expenses","setExpenses","error","setError","token","localStorage","getItem","defaults","headers","common","interceptor","interceptors","request","use","config","Authorization","Promise","reject","eject","addIncome","income","post","getIncomes","err","_err$response","_err$response$data","console","log","response","data","message","get","_err$response2","_err$response2$data","deleteIncome","id","delete","_err$response3","_err$response3$data","totalIncome","reduce","acc","amount","addExpense","expense","getExpenses","_err$response4","_err$response4$data","_err$response5","_err$response5$data","deleteExpense","_err$response6","_err$response6$data","totalExpenses","totalBalance","transactionHistory","history","sort","a","b","Date","createdAt","slice","Provider","value","useGlobalContext"],"sources":["C:/Users/jalle/VSC/miniproject/server/client/src/context/globalContext.js"],"sourcesContent":["import React, { useContext, useState, useEffect } from \"react\"\nimport axios from 'axios'\n\nconst BASE_URL = \"http://localhost:5000/api/v1/\";\n\nconst GlobalContext = React.createContext();\n\nexport const GlobalProvider = ({ children }) => {\n    const [incomes, setIncomes] = useState([]);\n    const [expenses, setExpenses] = useState([]);\n    const [error, setError] = useState(null);\n\n    // Setup Axios Interceptor\n    useEffect(() => {\n        const token = localStorage.getItem('token');\n        if (token) {\n            axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n        }\n\n        const interceptor = axios.interceptors.request.use(\n            (config) => {\n                const token = localStorage.getItem('token');\n                if (token) {\n                    config.headers.Authorization = `Bearer ${token}`;\n                }\n                return config;\n            },\n            (error) => Promise.reject(error)\n        );\n\n        return () => {\n            axios.interceptors.request.eject(interceptor);\n        };\n    }, []);\n\n    // 💰 Add Income\n    const addIncome = async (income) => {\n        try {\n            await axios.post(`${BASE_URL}add-income`, income);\n            getIncomes();\n        } catch (err) {\n            console.log(err);\n            setError(err.response?.data?.message || \"Failed to add income\");\n        }\n    };\n\n    // 📥 Get Incomes\n    const getIncomes = async () => {\n        try {\n            const { data } = await axios.get(`${BASE_URL}get-incomes`);\n            setIncomes(data);\n        } catch (err) {\n            console.log(err);\n            setError(err.response?.data?.message || \"Failed to fetch incomes\");\n        }\n    };\n\n    // 🗑️ Delete Income\n    const deleteIncome = async (id) => {\n        try {\n            await axios.delete(`${BASE_URL}delete-income/${id}`);\n            getIncomes();\n        } catch (err) {\n            console.log(err);\n            setError(err.response?.data?.message || \"Failed to delete income\");\n        }\n    };\n\n    const totalIncome = () => {\n        return incomes.reduce((acc, income) => acc + income.amount, 0);\n    };\n\n    // 💸 Add Expense\n    const addExpense = async (expense) => {\n        try {\n            await axios.post(`${BASE_URL}add-expense`, expense);\n            getExpenses();\n        } catch (err) {\n            console.log(err);\n            setError(err.response?.data?.message || \"Failed to add expense\");\n        }\n    };\n\n    // 📥 Get Expenses\n    const getExpenses = async () => {\n        try {\n            const { data } = await axios.get(`${BASE_URL}get-expenses`);\n            setExpenses(data);\n        } catch (err) {\n            console.log(err);\n            setError(err.response?.data?.message || \"Failed to fetch expenses\");\n        }\n    };\n\n    // 🗑️ Delete Expense\n    const deleteExpense = async (id) => {\n        try {\n            await axios.delete(`${BASE_URL}delete-expense/${id}`);\n            getExpenses();\n        } catch (err) {\n            console.log(err);\n            setError(err.response?.data?.message || \"Failed to delete expense\");\n        }\n    };\n\n    const totalExpenses = () => {\n        return expenses.reduce((acc, expense) => acc + expense.amount, 0);\n    };\n\n    const totalBalance = () => {\n        return totalIncome() - totalExpenses();\n    };\n\n    const transactionHistory = () => {\n        const history = [...incomes, ...expenses];\n        history.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));\n        return history.slice(0, 3);\n    };\n\n    return (\n        <GlobalContext.Provider\n            value={{\n                addIncome,\n                getIncomes,\n                incomes,\n                deleteIncome,\n                addExpense,\n                getExpenses,\n                expenses,\n                deleteExpense,\n                totalIncome,\n                totalExpenses,\n                totalBalance,\n                transactionHistory,\n                error,\n                setError\n            }}\n        >\n            {children}\n        </GlobalContext.Provider>\n    );\n};\n\nexport const useGlobalContext = () => {\n    return useContext(GlobalContext);\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}